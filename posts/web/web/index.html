<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="其作用就是配置一个web程序的基本功能。容器在启动一个web项目的时候先读取这个配置文件，在配置文件读取无误后开始按照配置启动剩余的服务。
加载顺序 # &lt;context-param&gt; -&gt; &lt;listener&gt; -&gt; &lt;filter&gt; -&gt; &lt;servlet&gt; 容器会创建一个ServletContext，整个项目都会共用这个上下文。而&lt;context-param&gt;的内容以键值对的形式存在这个上下文中。 然后对读取&lt;listener&gt;，并实例化listener类，并初始化。 listener类中会有contextInitialized(ServletContextEvent args)初始化方法，启动Web应用时，系统调用Listener的该方法，在这个方法中获得：
ServletContext application = ServletContextEvent.getServletContext(); context-param的值 = application.getInitParameter(&#34;context-param的键&#34;); 得到这个context-param的值之后，你就可以做一些操作了。 举例：你可能想在项目启动之前就打开数据库，那么这里就可以在&lt;context-param&gt;中设置数据库的连接方式（驱动、url、user、password），在监听类中初始化数据库的连接。这个监听是自己写的一个类，除了初始化方法，它还有销毁方法，用于关闭应用前释放资源。比如:说数据库连接的关闭，此时，调用contextDestroyed(ServletContextEvent args)，关闭Web应用时，系统调用Listener的该方法。
所以归根结底，这个&lt;context-param&gt;就是用来存一些配置数据的地方。
比如：定义一个管理员email地址用来从程序发送错误，或者与你整个应用程序有关的其他设置。使用自己定义的设置文件需要额外的代码和管理；直接在你的程序中使用硬编码（Hard-coding）参数值会给你之后修改程序带来麻烦，更困难的是，要根据不同的部署使用不同的设置；通过这种办法，可以让其他开发人员更容易找到相关的参数，因为它是一个用于设置这种参数的标准位置。
web-app # 根元素，不用多说
display-name # 应用的名称，这个在tomcat的维护信息中会出现。
session # &lt;session-config&gt; &lt;session-timeout&gt;120&lt;/session-timeout&gt; &lt;/session-config&gt; listener # &lt;!--****************************监听器配置*********************************--&gt; &lt;!-- Spring的log4j监听器 --&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.util.Log4jConfigListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; 监听器用来监听各种事件，比如：application和session事件，所有的监听器按照相同的方式定义，功能取决去它们各自实现的接口，常用的Web事件接口有如下几个：
ServletContextListener：用于监听Web应用的启动和关闭； ServletContextAttributeListener：用于监听ServletContext范围（application）内属性的改变； ServletRequestListener：用于监听用户的请求； ServletRequestAttributeListener：用于监听ServletRequest范围（request）内属性的改变； HttpSessionListener：用于监听用户session的开始和结束； HttpSessionAttributeListener：用于监听HttpSession范围（session）内属性的改变。 listener类是实现了以下两个接口中任何一个接口的简单java类：javax.servlet.ServletContextListener或javax.servlet.http.HttpSessionListener，如果想让你的类监听应用的启动和停止事件，你就得实现ServletContextListener接口；想让你的类去监听Session的创建和失效事件，那你就得实现HttpSessionListener接口。
有两种为应用配置listener的方式：
使用@WebListener修饰Listener实现类即可。 在web.xml文档中使用&lt;listener&gt;进行配置。 在下一节配置spring的加载类的时候会给出例子。
spring相关配置 # 配置spring，必须需要&lt;listener&gt;，&lt;context-param&gt;如果有就去加载配置的路径，没有就默认是/WEB-INF/applicationContext.xml。
&lt;!-- spring config --&gt; &lt;!-- if this node is not exist, --&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/spring-configuration/*.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="web.xml" />
<meta property="og:description" content="其作用就是配置一个web程序的基本功能。容器在启动一个web项目的时候先读取这个配置文件，在配置文件读取无误后开始按照配置启动剩余的服务。
加载顺序 # &lt;context-param&gt; -&gt; &lt;listener&gt; -&gt; &lt;filter&gt; -&gt; &lt;servlet&gt; 容器会创建一个ServletContext，整个项目都会共用这个上下文。而&lt;context-param&gt;的内容以键值对的形式存在这个上下文中。 然后对读取&lt;listener&gt;，并实例化listener类，并初始化。 listener类中会有contextInitialized(ServletContextEvent args)初始化方法，启动Web应用时，系统调用Listener的该方法，在这个方法中获得：
ServletContext application = ServletContextEvent.getServletContext(); context-param的值 = application.getInitParameter(&#34;context-param的键&#34;); 得到这个context-param的值之后，你就可以做一些操作了。 举例：你可能想在项目启动之前就打开数据库，那么这里就可以在&lt;context-param&gt;中设置数据库的连接方式（驱动、url、user、password），在监听类中初始化数据库的连接。这个监听是自己写的一个类，除了初始化方法，它还有销毁方法，用于关闭应用前释放资源。比如:说数据库连接的关闭，此时，调用contextDestroyed(ServletContextEvent args)，关闭Web应用时，系统调用Listener的该方法。
所以归根结底，这个&lt;context-param&gt;就是用来存一些配置数据的地方。
比如：定义一个管理员email地址用来从程序发送错误，或者与你整个应用程序有关的其他设置。使用自己定义的设置文件需要额外的代码和管理；直接在你的程序中使用硬编码（Hard-coding）参数值会给你之后修改程序带来麻烦，更困难的是，要根据不同的部署使用不同的设置；通过这种办法，可以让其他开发人员更容易找到相关的参数，因为它是一个用于设置这种参数的标准位置。
web-app # 根元素，不用多说
display-name # 应用的名称，这个在tomcat的维护信息中会出现。
session # &lt;session-config&gt; &lt;session-timeout&gt;120&lt;/session-timeout&gt; &lt;/session-config&gt; listener # &lt;!--****************************监听器配置*********************************--&gt; &lt;!-- Spring的log4j监听器 --&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.util.Log4jConfigListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; 监听器用来监听各种事件，比如：application和session事件，所有的监听器按照相同的方式定义，功能取决去它们各自实现的接口，常用的Web事件接口有如下几个：
ServletContextListener：用于监听Web应用的启动和关闭； ServletContextAttributeListener：用于监听ServletContext范围（application）内属性的改变； ServletRequestListener：用于监听用户的请求； ServletRequestAttributeListener：用于监听ServletRequest范围（request）内属性的改变； HttpSessionListener：用于监听用户session的开始和结束； HttpSessionAttributeListener：用于监听HttpSession范围（session）内属性的改变。 listener类是实现了以下两个接口中任何一个接口的简单java类：javax.servlet.ServletContextListener或javax.servlet.http.HttpSessionListener，如果想让你的类监听应用的启动和停止事件，你就得实现ServletContextListener接口；想让你的类去监听Session的创建和失效事件，那你就得实现HttpSessionListener接口。
有两种为应用配置listener的方式：
使用@WebListener修饰Listener实现类即可。 在web.xml文档中使用&lt;listener&gt;进行配置。 在下一节配置spring的加载类的时候会给出例子。
spring相关配置 # 配置spring，必须需要&lt;listener&gt;，&lt;context-param&gt;如果有就去加载配置的路径，没有就默认是/WEB-INF/applicationContext.xml。
&lt;!-- spring config --&gt; &lt;!-- if this node is not exist, --&gt; &lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/spring-configuration/*." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Paladnix.github.io/posts/web/web/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-08-01T20:59:50+00:00" />
<meta property="article:modified_time" content="2017-08-01T20:59:50+00:00" />

<title>web.xml | Paladnix Blog Site</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css" integrity="sha256-gsXb0jRHzuC0wqo&#43;0Izglh&#43;qQOH6Nw7uT4yfAuDUa18=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.2b5022a8aeceaeae15b9c246faa67b48c56f8bff0f12744d111e070f795bbd04.js" integrity="sha256-K1AiqK7Orq4VucJG&#43;qZ7SMVvi/8PEnRNER4HD3lbvQQ=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/images/paladnix-github.jpeg" alt="Logo" /><span>Paladnix Blog Site</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  

  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Blog Article</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-19f10fbb697c334a3284dd2194bc29f3" class="toggle"  />
    <label for="section-19f10fbb697c334a3284dd2194bc29f3" class="flex justify-between">
      <a role="button" class="">Acm</a>
    </label>
  

          
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Atcoder</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/acm/atcoder/abc-256-f/" class="">ABC-256-F 题解</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/acm/atcoder/abc-255_e/" class="">Lucky Number 题解</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/acm/bit-%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C/" class="">多棵树状数组处理区间问题</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/acm/acm-collection/" class="">ACM-collection</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/acm/cf855-c/" class="">Codeforces 855-C 树形DP</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/acm/fft/" class="">FFT 快速傅立叶变换</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/acm/acm-vim/" class="">VIM 在ACM/ICPC中的非最佳实践</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/acm/acm-contest-1/" class="">比赛题解-2017苏大暑假集训个人赛(13)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/acm/acmroad/" class="">ACMRoad</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-456a039e07b28260a08b7fc62b92dfd7" class="toggle"  />
    <label for="section-456a039e07b28260a08b7fc62b92dfd7" class="flex justify-between">
      <a role="button" class="">Rocks Db</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/rocksdb/skip-list/" class="">skip list原理与实现</a>
  

        </li>
      
    
      
    
      
        <li>
          
  
  

  
    <a href="/posts/rocksdb/summary/" class="">Summary</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-58201612638e1ea8bc6dbd0ba8468161" class="toggle"  />
    <label for="section-58201612638e1ea8bc6dbd0ba8468161" class="flex justify-between">
      <a role="button" class="">Python</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/python/python-type/" class="">python type</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/python/python-multithreaded/" class="">python 多线程和异步</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/python/anaconda/" class="">Tutorial of anaconda &amp; 原生虚环境</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d4afb3cb60fce6f19da24b63c311e48e" class="toggle"  />
    <label for="section-d4afb3cb60fce6f19da24b63c311e48e" class="flex justify-between">
      <a role="button" class="">Others</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/others/cuda/" class="">cuda</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/shadowsocks/" class="">shadowsocks 搭建</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/ngrok/" class="">ngrok服务端与客户端</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/tensorflow/" class="">tensorflow</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/vimium/" class="">Vimium - Google-Chrome-Plugin</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/lucene-1/" class="">Lucene（一）</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/raspberrypi/" class="">树莓派 - 入坑指南(1)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/curator/" class="">apache curator</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/synchronized/" class="">synchronized 同步锁</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/zookeeper/" class="">ZooKeeper</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/diary/" class="">Latex写工作日志的实践</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/sql/" class="">SQL进阶</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/others/hexo/" class="">Hexo</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-859a76a0227ac62639bc2dad75336fc7" class="toggle" checked />
    <label for="section-859a76a0227ac62639bc2dad75336fc7" class="flex justify-between">
      <a role="button" class="">Web</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/web/apache2/" class="">apache2 配置多端口服务</a>
  

        </li>
      
    
      
    
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/less/" class="">less 笔记</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/react-2/" class="">react 设计概念</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/mobx/" class="">mobx - redux的优秀替代品</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/react-router-dom/" class="">react-router tutorial</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/react-1/" class="">使用react开发的优秀实践</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/es6/" class="">ES 6</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/node/" class="">node nodejs npm 傻傻分不清楚on Ubuntu</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/cors/" class="">CORS Cross-Origin Resource Sharing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/tomcatserver/" class="">tomcat Server.xml及其启动顺序</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/cookie/" class="">Cookie</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/sso/" class="">sso 单点登录</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/web/" class="active">web.xml</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/angular/" class="">angular</a>
  

        </li>
      
    
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/react/" class="">react 初探-一些基础概念</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/cgi/" class="">CGI 通用网关协议</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/servlet/" class="">Servlet</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/chrome/" class="">chrome 控制台</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/tomcat/" class="">tomcat</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/http/" class="">你所不知道的http协议之优秀</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/rest-framework/" class="">rest_framework</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/django/" class="">Django</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/web/husky/" class="">Husky - A Light Web MVC Framework</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9fd6cd2d4bc98c7c7e2bc50b28778314" class="toggle"  />
    <label for="section-9fd6cd2d4bc98c7c7e2bc50b28778314" class="flex justify-between">
      <a role="button" class="">Bash</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/bash/bash/" class="">编写Bash脚本</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/bash/awk/" class="">awk - Linux文本处理大杀器</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/bash/commands/" class="">真正的老司机如何用Linux文本命令</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ac08f61dce7ad61dd2ea7ad4910367cb" class="toggle"  />
    <label for="section-ac08f61dce7ad61dd2ea7ad4910367cb" class="flex justify-between">
      <a role="button" class="">Linux</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/linux/taskwarrior/" class="">Tutorial of Taskwarrior</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/linux/linux-timing/" class="">Linux 定时任务</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/linux/linuxprogramming-1/" class="">《Linux 编程实践教程》- 1</a>
  

        </li>
      
    
      
    
      
        <li>
          
  
  

  
    <a href="/posts/linux/curl/" class="">curl</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-371dae9a8dd24e9c6ca13652146b9046" class="toggle"  />
    <label for="section-371dae9a8dd24e9c6ca13652146b9046" class="flex justify-between">
      <a role="button" class="">Git</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/git/advanced-git-1/" class="">git 进阶一</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/git/advanced-git/" class="">git 进阶</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/git/git/" class="">git实战指南</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/git/git-checkout/" class="">Git Checkout</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/git/git-log/" class="">Git Log</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/git/readme/" class="">Readme</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/git/rebase/" class="">Rebase</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/git/reset/" class="">Reset</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/git/summary/" class="">Summary</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-069647d66c3986a88c683691b95ae841" class="toggle"  />
    <label for="section-069647d66c3986a88c683691b95ae841" class="flex justify-between">
      <a role="button" class="">C</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/effectivec-1/" class="">Effective C&#43;&#43; 读书笔记</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/funcp/" class="">C 函数指针</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/cpp-1/" class="">cpp lamda &amp; for_each</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/c/" class="">随想-关于语言的一些感受</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/c-oop-3/" class="">C&#43;&#43; OOP--const、引用、指针</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/c-oop-2/" class="">C&#43;&#43; OOP--函数解析过程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/c-oop-1/" class="">C&#43;&#43; OOP基础--动态绑定</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/accessmodifier/" class="">OOP中的-控制修饰符</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/debug/" class="">Debug</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/epoll/" class="">Epoll</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/gccclang/" class="">Gcc&amp; Clang</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/rand/" class="">Rand</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/readme/" class="">Readme</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/scopeguard/" class="">Scope Guard</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/thread/" class="">Thread</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/%E5%86%85%E5%AD%98%E6%A3%80%E6%B5%8B/" class="">内存检测</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/" class="">智能指针</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/c&#43;&#43;/%E7%81%AB%E7%84%B0%E5%9B%BE/" class="">火焰图</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4badfc46eeb07d2a91fe2b336a095056" class="toggle"  />
    <label for="section-4badfc46eeb07d2a91fe2b336a095056" class="flex justify-between">
      <a role="button" class="">Java</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/java/javawait/" class="">java wait一种线程通信方式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/lamda/" class="">Java lamda 表达式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/javajsonandobject/" class="">Java Json And Object</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/javahttp/" class="">Java HttpClient</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/spring-2/" class="">每天读点Spring(2)--Start</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/spring-1/" class="">每天读点Spring(1)--Introduction</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/java-5/" class="">Java 多线程实现异步调用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/spring-shell/" class="">spring-shell</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/status/" class="">状态机编程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/springmvc/" class="">SpringMVC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/spring/" class="">spring</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/log/" class="">Java-Log日志</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/java-4/" class="">java 线程与池</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/iterator/" class="">iterator 迭代器</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/java-exception/" class="">Java Exception &amp; Error</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/jdbc/" class="">JDBC</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/java-3/" class="">Java-反射</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/java-2/" class="">Java 基础数据结构</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/maven-1/" class="">Maven</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/jersey/" class="">jersey</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/java-1/" class="">Java 抽象与接口</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/java-test-powermockito/" class="">Java Test Power Mockito</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/jdk/" class="">Jdk</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/maven/" class="">Maven</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/netty-io/" class="">Netty Io</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/spring-boot/" class="">Spring Boot</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/java/util-concurrent/" class="">Util Concurrent</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bcb64d436ed9c02263a1b9b3269d8223" class="toggle"  />
    <label for="section-bcb64d436ed9c02263a1b9b3269d8223" class="flex justify-between">
      <a role="button" class="">Redis</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/redis/redis-1/" class="">Redis 深度学习(1)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/redis/hyperloglog/" class="">HyperLogLog 基数估计算法</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/redis/geohash/" class="">GeoHash</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/redis/redis/" class="">redis</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5370d5473c2ed1e3d784bba01e464d1f" class="toggle"  />
    <label for="section-5370d5473c2ed1e3d784bba01e464d1f" class="flex justify-between">
      <a role="button" class="">Vim</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/vim/vim/" class="">VIM 花式进阶</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/vim/install/" class="">Install</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/vim/readme/" class="">Readme</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c8fc425ee75853771b6ba2bb2652a518" class="toggle"  />
    <label for="section-c8fc425ee75853771b6ba2bb2652a518" class="flex justify-between">
      <a role="button" class="">ID Ea</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/idea/ideakey/" class="">IDEA常用快捷键</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/idea/readme/" class="">Readme</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-1927baaa335601867ef5539b8d4b652e" class="toggle"  />
    <label for="section-1927baaa335601867ef5539b8d4b652e" class="flex justify-between">
      <a role="button" class="">Cmake</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/cmake/libs/" class="">Libs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/cmake/makefile/" class="">Makefile</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/cmake/project-struct/" class="">Project Struct</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/cmake/readme/" class="">Readme</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-01bc7a3f69f55c45502271dc2ed2272b" class="toggle"  />
    <label for="section-01bc7a3f69f55c45502271dc2ed2272b" class="flex justify-between">
      <a role="button" class="">Docker</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/posts/docker/build-image/" class="">Build Image</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/docker/docker-limit/" class="">Docker Limit</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/docker/k8s/" class="">K8s</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/posts/docker/readme/" class="">Readme</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/about/" class="">关于我</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a30b8e1d093c7132d046c0cf50833535" class="toggle"  />
    <label for="section-a30b8e1d093c7132d046c0cf50833535" class="flex justify-between">
      <a role="button" class="">Shark</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/shark/2.28/" class="">2.28</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/shark/algorithm-a/" class="">Algorithm A</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/shark/atcoder/" class="">Atcoder</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/shark/mui-v4-to-v5/" class="">Mui V4 to V5</a>
  

        </li>
      
    
      
    
      
        <li>
          
  
  

  
    <a href="/shark/testing-stl/" class="">Testing Stl</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/shark/testing2-4/" class="">Testing2 4</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/shark/week_11.8-12/" class="">Week 11.8 12</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>_drafts</span>
  

          
  <ul>
    
      
    
      
        <li>
          
  
  

  
    <a href="/_drafts/latex/" class="">Tutorial of Latex - The difference with .cls and .sty</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Docs</span>
  

          
  <ul>
    
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>web.xml</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#加载顺序">加载顺序</a></li>
        <li><a href="#filter">Filter</a></li>
        <li><a href="#servlet">Servlet</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown">
  <h1>
    <a href="/posts/web/web/">web.xml</a>
  </h1>
  
  <h5>August 1, 2017</h5>



  

  
  <div>
    
      <a href="/tags/java/">Java</a>, 
      <a href="/tags/web/">Web</a>, 
      <a href="/tags/tomcat/">Tomcat</a>
  </div>
  



<p>其作用就是配置一个web程序的基本功能。容器在启动一个web项目的时候先读取这个配置文件，在配置文件读取无误后开始按照配置启动剩余的服务。</p>
<h3 id="加载顺序">
  加载顺序
  <a class="anchor" href="#%e5%8a%a0%e8%bd%bd%e9%a1%ba%e5%ba%8f">#</a>
</h3>
<pre tabindex="0"><code>&lt;context-param&gt; -&gt; &lt;listener&gt; -&gt; &lt;filter&gt; -&gt; &lt;servlet&gt;
</code></pre><p>容器会创建一个ServletContext，整个项目都会共用这个上下文。而<code>&lt;context-param&gt;</code>的内容以键值对的形式存在这个上下文中。
然后对读取<code>&lt;listener&gt;</code>，并实例化<code>listener</code>类，并初始化。
listener类中会有contextInitialized(ServletContextEvent args)初始化方法，启动Web应用时，系统调用Listener的该方法，在这个方法中获得：</p>
<pre tabindex="0"><code>ServletContext application = ServletContextEvent.getServletContext();
context-param的值 = application.getInitParameter(&#34;context-param的键&#34;);
</code></pre><p>得到这个context-param的值之后，你就可以做一些操作了。
<strong>举例</strong>：你可能想在项目启动之前就打开数据库，那么这里就可以在<code>&lt;context-param&gt;</code>中设置数据库的连接方式（驱动、url、user、password），在监听类中初始化数据库的连接。这个监听是自己写的一个类，除了初始化方法，它还有销毁方法，用于关闭应用前释放资源。比如:说数据库连接的关闭，此时，调用contextDestroyed(ServletContextEvent args)，关闭Web应用时，系统调用Listener的该方法。</p>
<p>所以归根结底，这个<code>&lt;context-param&gt;</code>就是用来存一些配置数据的地方。</p>
<p>比如：定义一个管理员email地址用来从程序发送错误，或者与你整个应用程序有关的其他设置。使用自己定义的设置文件需要额外的代码和管理；直接在你的程序中使用硬编码（Hard-coding）参数值会给你之后修改程序带来麻烦，更困难的是，要根据不同的部署使用不同的设置；通过这种办法，可以让其他开发人员更容易找到相关的参数，因为它是一个用于设置这种参数的标准位置。</p>
<h4 id="web-app">
  web-app
  <a class="anchor" href="#web-app">#</a>
</h4>
<p>根元素，不用多说</p>
<h4 id="display-name">
  display-name
  <a class="anchor" href="#display-name">#</a>
</h4>
<p>应用的名称，这个在tomcat的维护信息中会出现。</p>
<h4 id="session">
  session
  <a class="anchor" href="#session">#</a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;session-config&gt;</span>   
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;session-timeout&gt;</span>120<span style="color:#f92672">&lt;/session-timeout&gt;</span>   
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/session-config&gt;</span>
</span></span></code></pre></div><h4 id="listener">
  listener
  <a class="anchor" href="#listener">#</a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!--****************************监听器配置*********************************--&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- Spring的log4j监听器 --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;listener&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;listener-class&gt;</span>org.springframework.web.util.Log4jConfigListener<span style="color:#f92672">&lt;/listener-class&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/listener&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;listener&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span style="color:#f92672">&lt;/listener-class&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/listener&gt;</span>
</span></span></code></pre></div><p>监听器用来监听各种事件，比如：application和session事件，所有的监听器按照相同的方式定义，功能取决去它们各自实现的接口，常用的Web事件接口有如下几个：</p>
<ul>
<li>ServletContextListener：用于监听Web应用的启动和关闭；</li>
<li>ServletContextAttributeListener：用于监听ServletContext范围（application）内属性的改变；</li>
<li>ServletRequestListener：用于监听用户的请求；</li>
<li>ServletRequestAttributeListener：用于监听ServletRequest范围（request）内属性的改变；</li>
<li>HttpSessionListener：用于监听用户session的开始和结束；</li>
<li>HttpSessionAttributeListener：用于监听HttpSession范围（session）内属性的改变。</li>
</ul>
<p><code>listener</code>类是实现了以下两个接口中任何一个接口的简单java类：javax.servlet.ServletContextListener或javax.servlet.http.HttpSessionListener，如果想让你的类监听应用的启动和停止事件，你就得实现ServletContextListener接口；想让你的类去监听Session的创建和失效事件，那你就得实现HttpSessionListener接口。</p>
<p>有两种为应用配置listener的方式：</p>
<ul>
<li>使用@WebListener修饰Listener实现类即可。</li>
<li>在web.xml文档中使用<code>&lt;listener&gt;</code>进行配置。</li>
</ul>
<p>在下一节配置spring的加载类的时候会给出例子。</p>
<h4 id="spring相关配置">
  spring相关配置
  <a class="anchor" href="#spring%e7%9b%b8%e5%85%b3%e9%85%8d%e7%bd%ae">#</a>
</h4>
<p>配置spring，必须需要<code>&lt;listener&gt;</code>，<code>&lt;context-param&gt;</code>如果有就去加载配置的路径，没有就默认是<code>/WEB-INF/applicationContext.xml</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- spring config --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- if this node is not exist, --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;context-param&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;param-name&gt;</span>contextConfigLocation<span style="color:#f92672">&lt;/param-name&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;param-value&gt;</span>/WEB-INF/spring-configuration/*.xml<span style="color:#f92672">&lt;/param-value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/context-param&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;listener&gt;</span>  
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span style="color:#f92672">&lt;/listener-class&gt;</span>  
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&lt;/listener&gt;</span>
</span></span></code></pre></div><p>事实上，spring的配置也是有两种不同的方式的，一种是上面的这种使用<code>listener</code>的方式，还有一种是使用<code>servlet</code>的方式，这两种方式的区别在与什么时候加载。
使用listener的方式，是在web启动的时候加载，并且加载的顺序是在<code>filter</code>之前。所以在<code>filter</code>中就可以使用spring的类，否则其中的对象就是空的，就无法使用。所以我们一般选用上面的这种配置方式来启动spring。</p>
<p>另外一种方式也放出来：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;servlet&gt;</span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;servlet-name&gt;</span>context<span style="color:#f92672">&lt;/servlet-narne&gt;</span>   
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;servlet-class&gt;</span>org.springframework.web.context.ContextLoaderServlet<span style="color:#f92672">&lt;/servlet-class&gt;</span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;load-on-startup&gt;</span>1<span style="color:#f92672">&lt;/load-on-startup&gt;</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/servlet&gt;</span>
</span></span></code></pre></div><h3 id="filter">
  Filter
  <a class="anchor" href="#filter">#</a>
</h3>
<p>Filter可认为是Servle的一种“加强版”，主要用于对用户请求request进行预处理，也可以对Response进行后处理，是个典型的处理链。使用Filter的完整流程是：Filter对用户请求进行预处理，接着将请求HttpServletRequest交给Servlet进行处理并生成响应，最后Filter再对服务器响应HttpServletResponse进行后处理。Filter与Servlet具有完全相同的生命周期，且Filter也可以通过<code>&lt;init-param&gt;</code>来配置初始化参数，获取Filter的初始化参数则使用FilterConfig的getInitParameter()。</p>
<p>换种说法，Servlet里有request和response两个对象，Filter能够在一个request到达Servlet之前预处理request，也可以在离开Servlet时处理response，Filter其实是一个Servlet链。以下是Filter的一些常见应用场合，</p>
<ul>
<li>(1)认证Filter</li>
<li>(2)日志和审核Filter</li>
<li>(3)图片转换Filter</li>
<li>(4)数据压缩Filter</li>
<li>(5)密码Filter</li>
<li>(6)令牌Filter</li>
<li>(7)触发资源访问事件的Filter</li>
<li>(8)XSLT Filter</li>
<li>(9)媒体类型链Filter</li>
</ul>
<p>Filter可负责拦截多个请求或响应；一个请求或响应也可被多个Filter拦截。
Filter必须实现javax.servlet.Filter接口，在该接口中定义了三个方法：</p>
<ul>
<li>void init(FilterConfig config)：用于完成Filter的初始化。FilteConfig用于访问Filter的配置信息。</li>
<li>void destroy()：用于Filter销毁前，完成某些资源的回收。</li>
<li>void doFilter(ServletRequest request,ServletResponse response,FilterChain chain)：实现过滤功能的核心方法，该方法就是对每个请求及响应增加额外的处理。该方法实现对用户请求request进行预处理，也可以实现对服务器响应response进行后处理&mdash;它们的分界线为是否调用了chain.doFilter(request，response)，执行该方法之前，即对用户请求request进行预处理，执行该方法之后，即对服务器响应response进行后处理。</li>
</ul>
<h4 id="filter配置">
  filter配置
  <a class="anchor" href="#filter%e9%85%8d%e7%bd%ae">#</a>
</h4>
<p>Filter配置与Servlet的配置非常相似，需要配置两部分：配置Filter名称和Filter拦截器URL模式。区别在于Servlet通常只配置一个URL，而Filter可以同时配置多个请求的URL。配置Filter有两种方式：</p>
<ul>
<li>Annotation注解相应类</li>
<li>web.xml</li>
</ul>
<p><code>&lt;filter&gt;</code>用于指定Web容器中的过滤器，可包含<code>&lt;filter-name&gt;</code>、<code>&lt;filter-class&gt;</code>、<code>&lt;init-param&gt;</code>、<code>&lt;icon&gt;</code>、<code>&lt;display-name&gt;</code>、<code>&lt;description&gt;</code>。</p>
<ul>
<li><code>&lt;filter-name&gt;</code>用来定义过滤器的名称，该名称在整个程序中都必须唯一。</li>
<li><code>&lt;filter-class&gt;</code>元素指定过滤器类的完全限定的名称，即Filter的实现类。</li>
<li><code>&lt;init-param&gt;</code>为Filter配置参数，与<code>&lt;context-param&gt;</code>具有相同的元素描述符<code>&lt;param-name&gt;</code>和<code>&lt;param-value&gt;</code>。</li>
</ul>
<p><code>&lt;filter-mapping&gt;</code>元素用来声明Web应用中的过滤器映射，过滤器被映射到一个servlet或一个URL 模式。这个过滤器的<code>&lt;filter&gt;</code>和<code>&lt;filter-mapping&gt;</code>必须具有相同的<code>&lt;filter-name&gt;</code>，指定该Filter所拦截的URL。过滤是按照部署描述符的<code>&lt;filter-mapping&gt;</code>出现的顺序执行的。</p>
<h4 id="example">
  Example
  <a class="anchor" href="#example">#</a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 字符集过滤器 --&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;filter&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;filter-name&gt;</span>CharacterEncodingFilter<span style="color:#f92672">&lt;/filter-name&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span style="color:#f92672">&lt;/filter-class&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;init-param&gt;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;param-name&gt;</span>encoding<span style="color:#f92672">&lt;/param-name&gt;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;param-value&gt;</span>UTF-8<span style="color:#f92672">&lt;/param-value&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/init-param&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;init-param&gt;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;param-name&gt;</span>forceEncoding<span style="color:#f92672">&lt;/param-name&gt;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;param-value&gt;</span>true<span style="color:#f92672">&lt;/param-value&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/init-param&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/filter&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;filter-mapping&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;filter-name&gt;</span>CharacterEncodingFilter<span style="color:#f92672">&lt;/filter-name&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;url-pattern&gt;</span>/*<span style="color:#f92672">&lt;/url-pattern&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/filter-mapping&gt;</span>
</span></span></code></pre></div><h3 id="servlet">
  Servlet
  <a class="anchor" href="#servlet">#</a>
</h3>
<p>Servlet通常称为服务器端小程序，是运行在服务器端的程序，用于处理及响应客户的请求。Servlet是个特殊的java类，继承于HttpServlet。客户端通常只有GET和POST两种请求方式，Servlet为了响应则两种请求，必须重写<code>doGet()</code>和<code>doPost()</code>方法。大部分时候，Servlet对于所有的请求响应都是完全一样的，此时只需要重写<code>service()</code>方法即可响应客户端的所有请求。
另外HttpServlet有两个方法:</p>
<ul>
<li>init(ServletConfig config)：创建Servlet实例时，调用该方法的初始化Servlet资源。</li>
<li>destroy()：销毁Servlet实例时，自动调用该方法的回收资源。
通常无需重写<code>init()</code>和<code>destroy()</code>两个方法，除非需要在初始化Servlet时，完成某些资源初始化的方法，才考虑重写<code>init()</code>方法，如果重写了<code>init()</code>方法，应在重写该方法的第一行调用super.init(config)，该方法将调用HttpServlet的<code>init()</code>方法。如果需要在销毁Servlet之前，先完成某些资源的回收，比如关闭数据库连接，才需要重写<code>destory()</code>。</li>
</ul>
<h4 id="生命周期">
  生命周期
  <a class="anchor" href="#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f">#</a>
</h4>
<p>创建Servlet实例有两个时机：
客户端第一次请求某个<code>Servlet</code>时，系统创建该<code>Servlet</code>的实例，大部分<code>Servlet</code>都是这种<code>Servlet</code>。
Web应用启动时立即创建<code>Servlet</code>实例，即<code>load-on-start Servlet</code>。</p>
<p>每个Servlet的运行都遵循如下生命周期：</p>
<ol>
<li>创建Servlet实例。</li>
<li>Web容器调用Servlet的init()方法，对Servlet进行初始化。</li>
<li>Servlet初始化后，将一直存在于容器中，用于响应客户端请求，如果客户端发送GET请求，容器调用Servlet的doGet()方法处理并响应请求；如果客户端发送POST请求，容器调用Servlet的doPost()方法处理并响应请求。或者统一使用service()方法处理来响应用户请求。</li>
<li>Web容器决定销毁Servlet时，先调用Servlet的destory()方法，通常在关闭Web应用时销毁Servlet实例。</li>
</ol>
<h4 id="配置">
  配置
  <a class="anchor" href="#%e9%85%8d%e7%bd%ae">#</a>
</h4>
<p>为了让Servlet能响应用户请求，还必须将Servlet配置在web应用中。
从Servlet3.0开始，配置Servlet有两种方式：</p>
<ul>
<li>在Servlet类中使用<code>@WebServlet Annotation</code>进行配置。</li>
<li>在<code>web.xml</code>文件中进行配置。</li>
</ul>
<p>我们用web.xml文件来配置Servlet，需要配置<code>&lt;servlet&gt;</code>和<code>&lt;servlet-mapping&gt;</code>。
<code>&lt;servlet&gt;</code>用来声明一个Servlet。<code>&lt;icon&gt;</code>、<code>&lt;display-name&gt;</code>和<code>&lt;description&gt;</code>元素的用法和<code>&lt;filter&gt;</code>的用法相同。<code>&lt;init-param&gt;</code>元素与<code>&lt;context-param&gt;</code>元素具有相同的元素描述符，可以使用<code>&lt;init-param&gt;</code>子元素将初始化参数名和参数值传递给Servlet，访问Servlet配置参数通过ServletConfig对象来完成，ServletConfig提供如下方法：</p>
<ul>
<li>
<p>java.lang.String.getInitParameter(java.lang.String name)：用于获取初始化参数</p>
</li>
<li>
<p>ServletConfig获取配置参数的方法和ServletContext获取配置参数的方法完全一样，只是ServletConfig是取得当前Servlet的配置参数，而ServletContext是获取整个Web应用的配置参数。</p>
</li>
<li>
<p><code>&lt;description&gt;</code>：为Servlet指定一个文本描述。</p>
</li>
<li>
<p><code>&lt;display-name&gt;</code>：为Servlet提供一个简短的名字被某些工具显示。</p>
</li>
<li>
<p><code>&lt;icon&gt;</code>：为Servlet指定一个图标，在图形管理工具中表示该Servlet。</p>
</li>
</ul>
<p><code>&lt;servlet&gt;</code>必须含有<code>&lt;servlet-name&gt;</code>和<code>&lt;servlet-class&gt;</code>，或者<code>&lt;servlet-name&gt;</code>和<code>&lt;jsp-file&gt;</code>。 描述如下：</p>
<ul>
<li><code>&lt;servlet-name&gt;</code>用来定义servlet的名称，该名称在整个应用中必须是惟一的</li>
<li><code>&lt;servlet-class&gt;</code>用来指定servlet的完全限定的名称。</li>
<li><code>&lt;jsp-file&gt;</code>用来指定应用中JSP文件的完整路径。这个完整路径必须由/开始。</li>
</ul>
<p><strong><!-- raw HTML omitted --></strong></p>
<p>如果<code>load-on-startup元素存在</code>，而且也指定了<code>jsp-file</code>元素，则JSP文件会被重新编译成<code>Servlet</code>，同时产生的Servlet也被载入内存。<code>&lt;load-on-startup&gt;</code>的内容可以为空，或者是一个整数。这个值表示由Web容器载入内存的顺序。
举个例子：如果有两个Servlet元素都含有<code>&lt;load-on-startup&gt;</code>子元素，则<code>&lt;load-on-startup&gt;</code>子元素值较小的<code>Servlet</code>将先被加载。如果<code>&lt;load-on-startup&gt;</code>子元素值为空或负值，则由Web容器决定什么时候加载Servlet。如果两个Servlet的<code>&lt;load-on-startup&gt;</code>子元素值相同，则由Web容器决定先加载哪一个Servlet。
<code>&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</code>表示启动容器时，初始化Servlet。</p>
<p><strong><code>&lt;servlet-mapping&gt;</code></strong></p>
<p><code>&lt;servlet-mapping&gt;</code>含有<code>&lt;servlet-name&gt;</code>和<code>&lt;url-pattern&gt;</code></p>
<ul>
<li><code>&lt;servlet-name&gt;</code>：Servlet的名字，唯一性和一致性，与<code>&lt;servlet&gt;</code>元素中声明的名字一致。</li>
<li><code>&lt;url-pattern&gt;</code>：指定相对于Servlet的URL的路径。该路径相对于web应用程序上下文的根路径。<code>&lt;servlet-mapping&gt;</code>将URL模式映射到某个Servlet，即该Servlet处理的URL。</li>
</ul>
<p><strong>加载Servlet的过程</strong>
容器的Context对象对请求路径(URL)做出处理，去掉请求URL的上下文路径后，按路径映射规则和Servlet映射路径i<code>&lt;url- pattern&gt;</code>做匹配，如果匹配成功，则调用这个Servlet处理请求。</p>
<h4 id="dispatcherservlet在webxml中的配置">
  DispatcherServlet在web.xml中的配置：
  <a class="anchor" href="#dispatcherservlet%e5%9c%a8webxml%e4%b8%ad%e7%9a%84%e9%85%8d%e7%bd%ae">#</a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- Spring view分发器  对所有的请求都由business对应的类来控制转发 --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;servlet&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;servlet-name&gt;</span>business<span style="color:#f92672">&lt;/servlet-name&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span style="color:#f92672">&lt;/servlet-class&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;init-param&gt;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;param-name&gt;</span>publishContext<span style="color:#f92672">&lt;/param-name&gt;</span>  
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;param-value&gt;</span>false<span style="color:#f92672">&lt;/param-value&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/init-param&gt;</span>  
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;load-on-startup&gt;</span>1<span style="color:#f92672">&lt;/load-on-startup&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/servlet&gt;</span>  
</span></span></code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    window.MathJaxReady = false;
    window.MathJax = {
        startup: {
            ready: () => {
            MathJax.startup.defaultReady();
            MathJax.startup.promise.then(() => {
            console.log('MathJax initial typesetting complete');
          });
        },
        elements: null,          
        typeset: true,           
        pageReady: () => {
          return MathJax.startup.defaultPageReady().then(() => {
            window.MathJaxReady = true;
            console.log('MathJax initial typesetting complete');
          });
        },
        document: document,      
        input: [],               
        output: null,            
        handler: null,           
        adaptor: null            
      },
      tex: {
        inlineMath: [['$', '$'], ['$$$', '$$$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true,
      },
        options:{
            ignoreHtmlClass: "CodeMirror|language-cpp|ace_editor|noJax",
            skipHtmlTags: ['script', 'style', 'textarea', 'input'],
        },
      chtml:{
          scale: 1.1
      }
    };
</script>
 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#加载顺序">加载顺序</a></li>
        <li><a href="#filter">Filter</a></li>
        <li><a href="#servlet">Servlet</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












